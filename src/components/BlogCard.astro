---
export interface Props {
  title: string;
  excerpt: string;
  image: string;
  alt: string;
  href: string;
  category: string;
  readTime?: string;
  publishDate?: string;
}

const {
  title,
  excerpt,
  image,
  alt,
  href,
  category,
  readTime = "3 min read",
  publishDate = "2025-01-15"
} = Astro.props;

const articleSchema = {
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": title,
  "description": excerpt,
  "image": `https://pvc-kapi-rehberi.web.app${image}`,
  "url": `https://pvc-kapi-rehberi.web.app${href}`,
  "datePublished": publishDate,
  "dateModified": publishDate,
  "author": {
    "@type": "Person",
    "name": "Zeynep Demir"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Cihanpan Door",
    "logo": {
      "@type": "ImageObject",
      "url": "https://pvc-kapi-rehberi.web.app/assets/img/logo/header-logo1.webp"
    }
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": `https://pvc-kapi-rehberi.web.app${href}`
  }
};
---

<article class="bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow" itemscope itemtype="https://schema.org/Article">
  <script type="application/ld+json" set:html={JSON.stringify(articleSchema)}></script>

  <div class="relative">
    <img
      src={image}
      alt={alt}
      class="w-full h-48 object-cover"
      loading="lazy"
      itemprop="image"
      width="400"
      height="240"
    />
    <div class="absolute top-4 left-4">
      <span class="bg-blue-600 text-white px-3 py-1 rounded-full text-sm" itemprop="articleSection">
        {category}
      </span>
    </div>
  </div>

  <div class="p-6">
    <div class="flex items-center text-gray-500 text-sm mb-3">
      <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
      </svg>
      <time datetime={`PT${readTime.split(' ')[0]}M`}>{readTime}</time>
    </div>

    <h3 class="text-xl font-bold mb-3 text-gray-900" itemprop="headline">
      <a href={href} class="hover:text-blue-600 transition-colors" itemprop="url">
        {title}
      </a>
    </h3>

    <p class="text-gray-600 mb-4 line-clamp-3" itemprop="description">
      {excerpt}
    </p>

    <div class="flex items-center justify-between">
      <a
        href={href}
        class="inline-flex items-center text-blue-600 hover:text-blue-800 font-semibold"
        aria-label={`${title} makalesini oku`}
      >
        Devamını Oku
        <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
        </svg>
      </a>

      <meta itemprop="datePublished" content={publishDate}>
      <meta itemprop="author" content="Zeynep Demir">
    </div>
  </div>
</article>
